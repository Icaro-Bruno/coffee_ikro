<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Painel Admin</title>
    <link rel="stylesheet" th:href="@{/admin/dashboard.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
<header>
    <div class="header-clean">
        <h1>Painel Administrativo</h1>
        <div class="header-actions">
            <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy')}"></span>
            <a th:href="@{/admin/logout}" class="logout"><i class="fa fa-sign-out-alt"></i> Sair</a>
        </div>
    </div>
</header>

<main class="dashboard-grid">

    <!-- PEDIDOS -->
    <section class="card highlight">
        <div class="card-header">
            <i class="fa fa-receipt fa-lg"></i>
            <h2>Pedidos</h2>
        </div>
        <div class="card-content">
            <div class="metric"><strong>Total:</strong> <span th:text="${totalPedidos}"></span></div>
            <div class="metric"><strong>Pendentes:</strong> <span th:text="${pedidosPendentes}"></span></div>
            <div class="metric"><strong>Enviados:</strong> <span th:text="${pedidosEnviados}"></span></div>
            <div class="metric"><strong>Cancelados:</strong> <span th:text="${pedidosCancelados}"></span></div>
            <div class="metric"><strong>A Caminho:</strong> <span th:text="${pedidosACaminho}"></span></div>
        </div>
        <div class="card-footer">
            <a th:href="@{/admin/pedidos}" class="btn">Ver pedidos</a>
        </div>
    </section>

    <!-- PRODUTOS -->
    <section class="card">
        <div class="card-header">
            <i class="fa fa-box fa-lg"></i>
            <h2>Produtos</h2>
        </div>
        <div class="card-content">
            <div class="metric"><strong>Total:</strong> <span th:text="${totalProdutos}"></span></div>
        </div>
        <div class="card-footer">
            <a th:href="@{/admin/produtos}" class="btn">Ver produtos</a>
        </div>
    </section>

    <!-- CLIENTES -->
    <section class="card">
        <div class="card-header">
            <i class="fa fa-users fa-lg"></i>
            <h2>Clientes</h2>
        </div>
        <div class="card-content">
            <div class="metric"><strong>Total:</strong> <span th:text="${totalClientes}"></span></div>
        </div>
        <div class="card-footer">
            <a th:href="@{/admin/clientes}" class="btn">Ver clientes</a>
        </div>
    </section>

    <!-- PROMOÇÕES -->
    <section class="card">
        <div class="card-header">
            <i class="fa fa-tags fa-lg"></i>
            <h2>Promoções</h2>
        </div>
        <div class="card-content">
            <div class="metric"><strong>Ativas:</strong> <span th:text="${totalPromocoes}"></span></div>
        </div>
        <div class="card-footer">
            <a th:href="@{/admin/promocoes}" class="btn">Ver promoções</a>
        </div>
    </section>

</main>
<script>
    document.addEventListener("DOMContentLoaded", function () {
      const cards = document.querySelectorAll(".card");

      cards.forEach(card => {
        const metrics = card.querySelectorAll(".card-content .metric");
        if (metrics.length <= 2) {
          card.classList.add("card-compact");
        }
      });
    });
</script>

</body>
</html>
